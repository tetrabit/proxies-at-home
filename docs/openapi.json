{"openapi":"3.0.3","info":{"title":"Scryfall Cache Microservice","description":"A high-performance caching microservice for Scryfall Magic: The Gathering card data. Provides fast search and retrieval of card information with built-in caching and bulk data loading.","contact":{"name":"Scryfall Cache API"},"license":{"name":""},"version":"0.1.0"},"paths":{"/admin/reload":{"post":{"tags":["admin"],"summary":"Force reload bulk data","operationId":"admin_reload","responses":{"200":{"description":"Bulk data reload completed","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ReloadResponse"}}}},"500":{"description":"Reload failed","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ReloadResponse"}}}}}}},"/cards/autocomplete":{"get":{"tags":["cards"],"summary":"Autocomplete card names","operationId":"autocomplete_cards","parameters":[{"name":"q","in":"query","description":"Card name prefix to search for (e.g., \"light\" matches \"Lightning Bolt\")","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"Autocomplete suggestions","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AutocompleteResponse"}}}},"400":{"description":"Bad request - query parameter required","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AutocompleteResponse"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AutocompleteResponse"}}}}}}},"/cards/named":{"get":{"tags":["cards"],"summary":"Get a card by name (fuzzy or exact)","operationId":"get_card_by_name","parameters":[{"name":"fuzzy","in":"query","description":"Fuzzy card name search (e.g., \"light bolt\" matches \"Lightning Bolt\")","required":false,"schema":{"type":"string","nullable":true}},{"name":"exact","in":"query","description":"Exact card name search (case-insensitive)","required":false,"schema":{"type":"string","nullable":true}}],"responses":{"200":{"description":"Card found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CardResponse"}}}},"400":{"description":"Bad request - must provide fuzzy or exact parameter","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CardResponse"}}}},"404":{"description":"Card not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CardResponse"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CardResponse"}}}}}}},"/cards/search":{"get":{"tags":["cards"],"summary":"Search for cards","operationId":"search_cards","parameters":[{"name":"q","in":"query","description":"Scryfall search query (e.g., \"c:red cmc:1\" or \"Sol Ring\")","required":true,"schema":{"type":"string"}},{"name":"limit","in":"query","description":"Maximum number of results to return (default: unlimited)","required":false,"schema":{"type":"integer","format":"int64","nullable":true}},{"name":"page","in":"query","description":"Page number for pagination (starts at 1)","required":false,"schema":{"type":"integer","nullable":true,"minimum":0}},{"name":"page_size","in":"query","description":"Number of results per page (default: 100, max: 1000)","required":false,"schema":{"type":"integer","nullable":true,"minimum":0}}],"responses":{"200":{"description":"Search results","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CardListResponse"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CardListResponse"}}}}}}},"/cards/{id}":{"get":{"tags":["cards"],"summary":"Get a specific card by ID","operationId":"get_card","parameters":[{"name":"id","in":"path","description":"Card UUID","required":true,"schema":{"type":"string","format":"uuid"}}],"responses":{"200":{"description":"Card found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CardResponse"}}}},"404":{"description":"Card not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CardResponse"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CardResponse"}}}}}}},"/health":{"get":{"tags":["health"],"summary":"Health check endpoint","operationId":"health","responses":{"200":{"description":"Service is healthy","content":{"application/json":{"schema":{}}}}}}},"/stats":{"get":{"tags":["statistics"],"summary":"Get cache statistics","operationId":"get_stats","responses":{"200":{"description":"Cache statistics","content":{"application/json":{"schema":{"$ref":"#/components/schemas/StatsResponse"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/StatsResponse"}}}}}}}},"components":{"schemas":{"AutocompleteParams":{"type":"object","description":"Autocomplete query parameters","required":["q"],"properties":{"q":{"type":"string","description":"Card name prefix to search for (e.g., \"light\" matches \"Lightning Bolt\")"}}},"AutocompleteResponse":{"type":"object","description":"Autocomplete response (Scryfall catalog format)","required":["object","data"],"properties":{"data":{"type":"array","items":{"type":"string"},"description":"Array of card name suggestions"},"object":{"type":"string","description":"Object type (always \"catalog\")"}}},"CacheStats":{"type":"object","description":"Cache statistics","required":["total_cards","total_cache_entries"],"properties":{"total_cache_entries":{"type":"integer","format":"int64","description":"Total number of cached query results"},"total_cards":{"type":"integer","format":"int64","description":"Total number of cards in the database"}}},"Card":{"type":"object","description":"A Magic: The Gathering card from the Scryfall database","required":["id","name","raw_json"],"properties":{"card_faces":{"nullable":true},"cmc":{"type":"number","format":"double","nullable":true},"collector_number":{"type":"string","nullable":true},"color_identity":{"type":"array","items":{"type":"string"},"nullable":true},"colors":{"type":"array","items":{"type":"string"},"nullable":true},"id":{"type":"string","format":"uuid"},"image_uris":{"nullable":true},"keywords":{"type":"array","items":{"type":"string"},"nullable":true},"legalities":{"nullable":true},"loyalty":{"type":"string","nullable":true},"mana_cost":{"type":"string","nullable":true},"name":{"type":"string"},"oracle_id":{"type":"string","format":"uuid","nullable":true},"oracle_text":{"type":"string","nullable":true},"power":{"type":"string","nullable":true},"prices":{"nullable":true},"rarity":{"type":"string","nullable":true},"raw_json":{},"released_at":{"type":"string","format":"date","nullable":true},"set_code":{"type":"string","nullable":true},"set_name":{"type":"string","nullable":true},"toughness":{"type":"string","nullable":true},"type_line":{"type":"string","nullable":true}}},"CardListResponse":{"type":"object","description":"Paginated card list response","required":["success"],"properties":{"data":{"allOf":[{"$ref":"#/components/schemas/PaginatedCardData"}],"nullable":true},"error":{"allOf":[{"$ref":"#/components/schemas/crate.errors.response.ErrorDetail"}],"nullable":true},"success":{"type":"boolean","description":"Whether the request was successful"}}},"CardResponse":{"type":"object","description":"Card response","required":["success"],"properties":{"data":{"allOf":[{"$ref":"#/components/schemas/Card"}],"nullable":true},"error":{"allOf":[{"$ref":"#/components/schemas/crate.errors.response.ErrorDetail"}],"nullable":true},"success":{"type":"boolean","description":"Whether the request was successful"}}},"ErrorCode":{"type":"string","description":"Error codes for structured API responses","enum":["INVALID_QUERY","CARD_NOT_FOUND","RATE_LIMIT_EXCEEDED","DATABASE_ERROR","SCRYFALL_API_ERROR","INVALID_API_KEY","VALIDATION_ERROR","INTERNAL_ERROR"]},"ErrorDetail":{"type":"object","description":"Error details","required":["code","message","request_id"],"properties":{"code":{"$ref":"#/components/schemas/ErrorCode"},"details":{"description":"Additional context (optional)","nullable":true},"message":{"type":"string","description":"Human-readable error message"},"request_id":{"type":"string","description":"Request ID for tracing"}}},"ErrorResponse":{"type":"object","description":"Structured error response","required":["success","error"],"properties":{"error":{"$ref":"#/components/schemas/ErrorDetail"},"success":{"type":"boolean","description":"Always false for errors"}}},"NamedParams":{"type":"object","description":"Named card lookup parameters","properties":{"exact":{"type":"string","description":"Exact card name search (case-insensitive)","nullable":true},"fuzzy":{"type":"string","description":"Fuzzy card name search (e.g., \"light bolt\" matches \"Lightning Bolt\")","nullable":true}}},"PaginatedCardData":{"type":"object","description":"Paginated card data","required":["data","total","page","page_size","total_pages","has_more"],"properties":{"data":{"type":"array","items":{"$ref":"#/components/schemas/Card"},"description":"Array of results for the current page"},"has_more":{"type":"boolean","description":"Whether there are more pages available"},"page":{"type":"integer","description":"Current page number","minimum":0},"page_size":{"type":"integer","description":"Number of results per page","minimum":0},"total":{"type":"integer","description":"Total number of results across all pages","minimum":0},"total_pages":{"type":"integer","description":"Total number of pages","minimum":0}}},"ReloadResponse":{"type":"object","description":"Reload response","required":["success"],"properties":{"data":{"type":"string","description":"Response data (present if success is true)","nullable":true},"error":{"allOf":[{"$ref":"#/components/schemas/crate.errors.response.ErrorDetail"}],"nullable":true},"success":{"type":"boolean","description":"Whether the request was successful"}}},"SearchParams":{"type":"object","description":"Search query parameters","required":["q"],"properties":{"limit":{"type":"integer","format":"int64","description":"Maximum number of results to return (default: unlimited)","nullable":true},"page":{"type":"integer","description":"Page number for pagination (starts at 1)","nullable":true,"minimum":0},"page_size":{"type":"integer","description":"Number of results per page (default: 100, max: 1000)","nullable":true,"minimum":0},"q":{"type":"string","description":"Scryfall search query (e.g., \"c:red cmc:1\" or \"Sol Ring\")"}}},"StatsResponse":{"type":"object","description":"Cache statistics response","required":["success"],"properties":{"data":{"allOf":[{"$ref":"#/components/schemas/CacheStats"}],"nullable":true},"error":{"allOf":[{"$ref":"#/components/schemas/crate.errors.response.ErrorDetail"}],"nullable":true},"success":{"type":"boolean","description":"Whether the request was successful"}}}}},"tags":[{"name":"health","description":"Health check endpoints"},{"name":"cards","description":"Card search and retrieval endpoints"},{"name":"statistics","description":"Cache statistics and metrics"},{"name":"admin","description":"Administrative endpoints"}]}